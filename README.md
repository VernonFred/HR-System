# EPQ 人格测试系统

> **当前版本：v2.5** | 更新日期：2025-11-27 | 状态：✅ 智能分析增强版

一个纯前端的 EPQ（艾森克人格问卷）测试应用，专为招聘面试场景设计。采用现代化企业级仪表盘设计，提供完善的数据分析和可视化能力。

## 🎯 快速开始

**遇到问题？** 请先阅读 [快速验证指南.md](./快速验证指南.md)

**第一次使用？** 推荐按以下顺序阅读文档：
1. [快速验证指南.md](./快速验证指南.md) - 快速上手和问题排查
2. [README.md](./README.md)（本文档） - 完整功能说明
3. [配置功能说明.md](./配置功能说明.md) - 高级配置指南
4. [CHANGELOG.md](./CHANGELOG.md) - 版本更新历史

## 📁 文件说明

### 核心文件
- **test.html** - 面试者答题页面（88题完整EPQ测试）
- **admin.html** - 管理员后台页面（现代化数据分析仪表盘）

### 工具文件
- **debug.html** - 🆕 LocalStorage 调试工具（查看/生成/清空数据）
- **test_data_generator.html** - 测试数据生成器（用于功能测试）

### 文档文件
- **README.md** - 完整使用说明文档（本文档）
- **快速验证指南.md** - 🆕 快速验证和问题排查指南
- **问题修复报告.md** - 🆕 v2.4 问题修复详细报告
- **配置功能说明.md** - 配置功能使用指南
- **CHANGELOG.md** - 🆕 版本更新日志

### 历史文档
- **问题修复说明.md** - v2.3 问题修复记录
- **v2.3更新说明.md** - v2.3 版本更新说明
- **v2.3功能测试清单.md** - v2.3 功能测试清单
- **v2.3完成总结.md** - v2.3 完成总结

## 🔥 v2.5 重大更新

### 🎯 三大智能分析模块（全新）
1. **岗位匹配度雷达分析** - 实际值 vs 理想值对比，直观展示匹配程度
2. **同岗位竞争力排名** - S/A/B/C/D 五级评分，快速筛选优质候选人
3. **候选人画像与发展建议** - 8 种性格类型分析，提供面试建议

### 📊 产品优化
- **移除"提交趋势"** - 替换为更有价值的分析模块
- **科学的岗位理想模型** - 9 个岗位的专业 EPQ 模型配置
- **智能匹配分算法** - 综合评分（岗位匹配40% + EPQ平衡30% + 诚实度20% + 完成质量10%）
- **增强的详情抽屉** - 显示性格画像、优势、风险、面试建议

### 🎁 v2.4 修复（已完成）
- ✅ 后台管理页面无数据显示 - 日期格式统一化
- ✅ CSV 导出数据缺失 - 字段验证增强
- ✅ debug.html 调试工具 - 方便数据管理

详细更新内容请查看 [v2.5更新说明.md](./v2.5更新说明.md) 和 [CHANGELOG.md](./CHANGELOG.md)

## ✨ 功能特性

### 面试者端 (test.html)
- ✅ 信息采集：姓名、手机（带格式验证）、岗位、备注
- ✅ 完整测评：88 题标准 EPQ 测试（E、N、P、L 四个维度）
- ✅ 分页答题：每页 8 题，共 11 页，实时进度显示
- ✅ 手机优先：大号按钮、流畅动画、现代渐变配色
- ✅ 智能验证：未答完不能翻页/提交，清晰错误提示
- ✅ 自动保存：结果实时存入 localStorage

### 管理员端 (admin.html) - 🆕 全新设计

#### 🎨 现代化界面设计
- **企业级 UI 风格**：参考飞书/Notion等 SaaS 产品
- **精美统计卡片**：5个渐变色数据卡片，实时更新
- **优雅交互体验**：悬停效果、平滑过渡、响应式布局
- **专业图标系统**：Remix Icon 全套图标
- **主题可定制**：CSS 变量控制，易于换肤

#### 🔐 登录与安全
- 密码保护：默认密码 `epq_admin_123`
- 会话保持：刷新页面无需重新登录
- 安全提示：清晰的错误反馈

#### 📊 智能数据统计（5个卡片）
1. **总测试人数** - 累计参与测评人数
2. **应聘岗位数** - 自动统计岗位类型
3. **今日新增** - 显示较昨日变化趋势（↑/↓百分比）
4. **当前筛选结果** - 实时更新筛选数量
5. **高匹配占比** - 自动计算优质候选人比例

#### 🔍 强大筛选系统
- **多维度筛选**：
  - 按应聘岗位（自动识别所有岗位）
  - 按日期范围（开始/结束日期）
  - 按关键词（姓名或手机号模糊搜索）
- **快捷操作**：
  - 一键筛选最近7天/30天
  - 清空所有筛选条件
  - 实时响应，无需点击查询

#### 📋 现代化数据表格
- **视觉优化**：斑马纹 + 悬停高亮 + 圆角设计
- **智能排序**：点击表头按提交时间、E/N/P/L 分数排序
- **隐私保护**：手机号中间四位自动脱敏（138****5123）
- **匹配度标签**：
  - 🟢 高匹配（绿色徽章）
  - 🟠 一般（橙色徽章）
  - 🔴 需谨慎（红色徽章）
- **分页控件**：每页10条，完整分页导航
- **点击查看详情**：任意行点击弹出详情抽屉
- **数据管理**（🆕 新增）：
  - ☑️ 批量选择：表头全选，支持跨页选择
  - 🗑️ 单条删除：每行独立删除按钮
  - 📦 批量删除：选中后一键删除多条记录
  - ⚠️ 二次确认：防止误删，显示删除数量

#### 👤 候选人详情抽屉
点击表格任意行，右侧滑出详情面板：
- **基本信息区**：完整个人资料展示
- **EPQ 分数卡**：四个维度得分（E/N/P/L）
- **雷达图可视化**：动态渲染个性化雷达图
- **智能匹配评估**：
  - 显示匹配等级（高匹配/一般/需谨慎）
  - 详细文字分析："外向性高，情绪稳定，团队协作性好，诚信度高"
  - 针对性建议："建议优先考虑" / "可进入下一轮" / "建议谨慎"

#### 📈 数据可视化分析（3个图表）
采用 Tab 切换，支持以下图表：

1. **岗位 EPQ 均值对比图**（柱状图）
   - 横向对比不同岗位候选人的平均人格特征
   - E、N、P、L 四个维度并列展示
   - 帮助识别各岗位的人格特征差异

2. **岗位匹配度分布图**（饼图）
   - 高匹配/一般/需谨慎三档占比
   - 直观了解候选人整体质量
   - 辅助招聘决策

3. **提交数量趋势图**（折线图）
   - 按日期统计每日测试人数
   - 渐变填充面积图效果
   - 帮助 HR 了解投递节奏和招聘热度

#### 💾 数据导出
- **一键导出 CSV**：导出当前筛选后的所有记录
- **完整字段**：时间、姓名、手机、岗位、E/N/P/L、匹配度、备注
- **Excel 友好**：UTF-8 BOM 编码，直接用 Excel 打开无乱码
- **智能文件名**：自动生成带日期的文件名

#### ⚙️ 页面配置面板（🆕 新增）
点击右上角设置按钮，侧边栏滑出配置面板：
- **模块显示控制**：
  - ☑️ 显示统计卡片区域
  - ☑️ 显示数据筛选区域
  - ☑️ 显示数据表格
  - ☑️ 显示可视化图表
- **实时生效**：勾选/取消立即显示/隐藏对应模块
- **配置持久化**：设置保存到 localStorage，刷新不丢失
- **个性化定制**：管理员可根据需要自定义仪表盘布局

#### 🧠 智能岗位匹配算法
内置 9 种岗位的匹配规则：
- **Java/前端开发**：E 中等、N 低、P 低、L 高
- **销售/市场**：E 高、N 低、P 中、L 高
- **产品经理**：E 高、N 低-中、P 中、L 中-高
- **UI 设计师**：E 中、N 低-中、P 中-高、L 中-高
- **人力资源**：E 中-高、N 低、P 低、L 高
- **财务专员**：E 低-中、N 低、P 极低、L 极高
- **行政专员**：E 中、N 低-中、P 低、L 高

**评分机制**：
- 加权计算：N（情绪稳定）和 L（诚信度）权重更高
- 容错范围：±3分仍算匹配
- 综合评分：≥75% = 高匹配，50-75% = 一般，<50% = 需谨慎

**评估描述**：
- 自动生成详细文字分析
- 例如："外向性高，情绪稳定，团队协作性好，诚信度高。整体人格特征与销售经理的岗位要求高度匹配，建议优先考虑。"

## 🚀 使用方法

### 方法一：本地直接打开

1. 将 `test.html` 和 `admin.html` 保存到同一文件夹
2. 双击 `test.html` 开始测试
3. 双击 `admin.html` 进入管理后台

### 方法二：本地服务器（推荐）

使用 Python 快速启动本地服务器：

```bash
# Python 3
python -m http.server 8000

# 或 Python 2
python -m SimpleHTTPServer 8000
```

然后访问：
- 测试页面：http://localhost:8000/test.html
- 管理后台：http://localhost:8000/admin.html

### 方法三：部署到静态服务器

将两个 HTML 文件上传到任意静态网站托管服务：
- GitHub Pages
- Vercel
- Netlify
- 阿里云 OSS
- 腾讯云 COS

## 📱 手机端访问

### 生成二维码

1. 部署到在线服务器后，获得访问 URL（如：https://your-domain.com/test.html）
2. 使用二维码生成工具生成二维码：
   - [草料二维码](https://cli.im/)
   - [联图二维码](https://www.wwei.cn/)
3. 打印二维码，面试者扫码即可答题

### 内网访问

如果在公司内网使用：

1. 启动本地服务器
2. 查看本机 IP 地址：
   ```bash
   # macOS/Linux
   ifconfig | grep inet
   
   # Windows
   ipconfig
   ```
3. 其他设备通过 `http://你的IP:8000/test.html` 访问

## 📊 EPQ 维度说明

| 维度 | 英文名 | 中文名 | 题目数 | 说明 |
|-----|--------|--------|--------|------|
| E | Extraversion | 外向性 | 21题 | 衡量个体的社交倾向和活力 |
| N | Neuroticism | 神经质 | 24题 | 衡量情绪稳定性和焦虑水平 |
| P | Psychoticism | 精神质 | 21题 | 衡量冲动性和人际敏感度 |
| L | Lie Scale | 掩饰性 | 22题 | 测量作答诚实度（效度指标）|

## 🎯 岗位匹配规则

系统内置了简化的岗位匹配规则示例：

- **开发类岗位**：E 中等、N 低、P 低、L 高
- **销售类岗位**：E 高、N 低、P 中等、L 高
- **财务类岗位**：E 低-中、N 低、P 低、L 高
- **产品/运营**：E 高、N 低-中、P 中等、L 中-高

匹配度判断：
- 🟢 **高匹配**：各维度得分与岗位要求吻合度 ≥70%
- 🟠 **一般**：吻合度在 50%-70% 之间
- 🔴 **需谨慎**：吻合度 <50%

## 💾 数据存储

- 使用浏览器 `localStorage` 存储数据
- 数据仅保存在本地浏览器中
- **注意**：清除浏览器数据会导致记录丢失
- 建议定期导出 CSV 备份数据

## 🔐 安全说明

- 管理员密码默认为 `epq_admin_123`，可在 `admin.html` 代码中修改
- 定位代码位置：搜索 `const ADMIN_PASSWORD = 'epq_admin_123';`
- 建议修改为更强的密码（8位以上，包含字母数字）
- 会话管理：使用 sessionStorage，关闭浏览器自动退出
- 本系统为纯前端实现，适合小规模内部使用，不适合大规模生产环境

## ⚠️ 注意事项

1. **浏览器兼容性**：建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
2. **数据安全**：重要数据请及时导出备份
3. **同源策略**：`test.html` 和 `admin.html` 需在同一域名下才能共享数据
4. **手机适配**：已针对手机端优化，建议竖屏使用
5. **测试准确性**：本系统仅供参考，不能作为唯一的招聘决策依据

## 🛠️ 自定义修改指南

### 修改岗位选项

编辑 `test.html`，搜索 `<select id="position"`：

```html
<select id="position" required>
    <option value="">请选择岗位</option>
    <option value="Java开发工程师">Java开发工程师</option>
    <option value="前端开发工程师">前端开发工程师</option>
    <!-- 添加或修改选项 -->
</select>
```

### 修改管理员密码

编辑 `admin.html`，搜索 `const ADMIN_PASSWORD`：

```javascript
const ADMIN_PASSWORD = 'epq_admin_123'; // 修改为你的密码
```

### 调整题目

如需调整题目，编辑 `test.html` 中的 `questions` 数组（约第 390 行）。

### 自定义主题颜色

编辑 `admin.html`，修改 CSS 变量（约第 10 行）：

```css
:root {
    --primary: #4f46e5;        /* 主题色（蓝紫色）*/
    --success: #10b981;         /* 成功色（绿色）*/
    --warning: #f59e0b;         /* 警告色（橙色）*/
    --danger: #ef4444;          /* 危险色（红色）*/
    --bg: #f3f4f8;             /* 背景色（浅灰）*/
    --card-radius: 16px;        /* 圆角大小 */
}
```

### 修改岗位匹配规则

编辑 `admin.html`，搜索 `function evaluateFit`，修改 `profiles` 对象：

```javascript
const profiles = {
    '你的岗位名称': { 
        E: [最小值, 最大值],  // 外向性范围
        N: [最小值, 最大值],  // 神经质范围
        P: [最小值, 最大值],  // 精神质范围
        L: [最小值, 最大值]   // 掩饰性范围
    }
};
```

### 修改分页数量

编辑 `admin.html`，搜索 `const ITEMS_PER_PAGE`：

```javascript
const ITEMS_PER_PAGE = 10; // 修改为你想要的每页条数
```

### 修改数据存储键

如果需要更改数据存储的 localStorage 键名：

```javascript
// admin.html 中
const STORAGE_KEY = 'epqRecords';  // 数据存储键
const CONFIG_KEY = 'epqAdminSettings';  // 配置存储键

// test.html 中也要同步修改
localStorage.setItem('epqRecords', ...);
```

## 📞 常见问题 FAQ

### Q1: 后台显示"暂无数据"怎么办？
**A**: 需要先在 `test.html` 页面完成至少一次测试，数据才会保存到 localStorage。确保两个文件在同一域名下打开。

### Q2: 数据能否在不同浏览器间共享？
**A**: 不能。localStorage 数据是浏览器隔离的。建议使用同一浏览器，或定期导出 CSV 备份。

### Q3: 如何删除测试记录？
**A**: 
- **删除单条**：在数据表格中点击每行右侧的"删除"按钮
- **批量删除**：勾选要删除的记录，点击右上角"删除选中"按钮
- **清空所有数据**：
  1. 打开浏览器开发者工具（F12）
  2. 进入 Console 控制台
  3. 输入：`localStorage.clear()` 回车
  4. 刷新页面

### Q4: 手机号脱敏能否显示完整号码？
**A**: 在详情抽屉中会显示完整手机号。表格中默认脱敏是为了保护隐私。

### Q5: 图表显示异常或不显示？
**A**: 
1. 检查网络是否正常（图表库通过 CDN 加载）
2. 确保至少有 2 条以上的测试数据
3. 尝试切换不同的 Tab 图表

### Q6: 能否部署到 Gitee Pages？
**A**: 可以！直接上传两个 HTML 文件到 Gitee 仓库，开启 Pages 服务即可。

### Q7: 导出的 CSV 文件乱码？
**A**: 使用 Excel 打开时选择"UTF-8"编码，或直接双击打开（已添加 BOM）。

### Q8: 配置面板设置后不生效？
**A**: 检查浏览器是否禁用了 localStorage。部分隐私模式下 localStorage 不可用。

## 📞 技术支持

如遇到其他问题，请检查：
1. **浏览器控制台**：按 F12 查看是否有错误信息
2. **浏览器版本**：建议使用 Chrome 90+、Firefox 88+、Safari 14+、Edge 90+
3. **文件完整性**：确保 HTML 文件保存完整，没有被截断
4. **CDN 访问**：如果在内网环境，确保能访问 CDN（jsdelivr.net）

## 🎯 最佳实践建议

1. **定期备份**：每周导出一次 CSV 数据，防止浏览器清理缓存导致数据丢失
2. **密码安全**：部署到公网前务必修改默认密码
3. **数据清理**：定期清理测试数据，保持系统性能
4. **浏览器固定**：建议 HR 使用固定浏览器登录，避免数据分散
5. **内网部署**：如需正式使用，建议部署在公司内网服务器

## 📊 数据分析技巧

1. **横向对比**：使用"岗位 EPQ 均值对比图"识别不同岗位的人格特征差异
2. **趋势分析**：通过"提交数量趋势图"把握招聘热度和投递节奏
3. **质量评估**：关注"高匹配占比"指标，了解候选人整体质量
4. **个案分析**：点击表格行查看详情，结合雷达图做深度评估
5. **筛选技巧**：善用日期和关键词筛选，快速定位目标候选人

## 🚀 性能优化建议

- **数据量**：建议单个浏览器存储不超过 1000 条记录
- **定期清理**：超过 500 条后可导出并清理历史数据
- **图表性能**：数据过多时图表可能加载较慢，建议使用筛选功能
- **响应速度**：桌面浏览器体验最佳，移动端建议仅查看不做复杂操作

## 📄 许可说明

本项目仅供学习和内部使用，请遵守相关法律法规和隐私保护规定。

**免责声明**：
- 本系统提供的人格测评结果仅供参考，不能作为唯一的招聘决策依据
- EPQ 测试需要专业心理学背景解读，建议结合其他评估方法综合判断
- 使用者需承担数据安全和隐私保护责任

---

**最后更新**：2025年11月27日  
**版本**：v2.1 - 配置功能完善版  
**技术栈**：HTML5 + CSS3 + 原生 JavaScript + ECharts 5.4 + Remix Icon 3.5

## 📋 更新日志

### v2.2 (2025-11-27) - 问题修复与功能增强
- 🐛 **修复CSV导出**：解决提交时间和手机号数据不显示的问题
- 🗑️ **删除功能**：新增单条删除和批量删除功能，支持数据清理
- 📊 **图表优化**：修复匹配度分布图文字显示不完整的问题
- ✅ **岗位管理修复**：确保岗位添加、编辑、删除功能正常运行
- 🎯 **数据完整性**：全面检查并优化所有功能的数据处理
- 📦 **批量操作**：表格支持复选框选择，可批量删除记录
- 💡 **测试工具**：新增测试数据生成器，方便功能验证

### v2.1 (2025-11-27) - 配置功能完善
- ✅ **模块显示开关**：可自由控制统计卡片、筛选区域、表格、图表的显示隐藏
- ✅ **岗位管理**：支持添加、编辑、删除岗位，带配置状态图标
- ✅ **匹配度规则配置**：为每个岗位自定义 EPQ 匹配规则，支持保存和重置
- ✅ **表格列显示控制**：自由选择表格显示哪些列
- ✅ **配置导出**：支持导出岗位和规则配置为 JSON 文件
- ✅ **界面优化**：配置面板添加说明横幅，岗位列表优化，规则配置提示完善
- ✅ **用户体验**：添加更多友好的提示信息和确认对话框

### v2.0 (2025-11-26) - 全新企业级仪表盘
- 🎨 现代化 UI 设计，参考飞书/Notion 风格
- 📊 5个精美统计卡片，实时数据展示
- 🔍 强大的筛选系统（岗位、日期、关键词）
- 📋 现代化数据表格，支持排序、分页、脱敏
- 📈 3个可视化图表（岗位对比、匹配度分布、趋势图）
- 👤 详情抽屉，完整展示候选人信息和雷达图
- 🧠 智能匹配算法，9种岗位内置规则
