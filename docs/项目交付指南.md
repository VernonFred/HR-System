# QZ·TalentLens 项目交付指南

> **版本**: v2.0  
> **更新日期**: 2025年12月12日  
> **适用场景**: 项目交付、运维交接

---

## 📦 交付清单

### 一、系统交付物

#### 1.1 源代码
- [ ] 完整的前后端源代码（GitHub仓库）
- [ ] 数据库SQL结构文件
- [ ] 环境配置模板（`.env.example`）
- [ ] 依赖配置文件（`pyproject.toml`, `package.json`）

#### 1.2 数据库
- [ ] 开发数据库备份（包含测试数据）
- [ ] 生产数据库初始化SQL
- [ ] 数据库迁移脚本（alembic）

#### 1.3 文档
- [ ] 产品功能架构文档
- [ ] 产品使用指南（HR操作手册）
- [ ] AI驱动画像分析可信性报告
- [ ] 大模型应用架构文档
- [ ] 部署交付文档
- [ ] 后续维护文档
- [ ] API接口文档
- [ ] 数据库表文档
- [ ] 依赖安装文档
- [ ] 数据库访问指南
- [ ] 部署检查说明
- [ ] 本交付指南

---

## 🚀 部署交接

### 二、环境准备

#### 2.1 服务器要求
```
最低配置:
- CPU: 2核
- 内存: 4GB
- 硬盘: 50GB
- 操作系统: Ubuntu 20.04+ / CentOS 7+

推荐配置:
- CPU: 4核+
- 内存: 8GB+
- 硬盘: 100GB SSD
- 操作系统: Ubuntu 22.04 LTS
```

#### 2.2 依赖环境
- [ ] Python 3.10+
- [ ] Node.js 18+
- [ ] PostgreSQL 13+ (生产环境)
- [ ] Nginx
- [ ] SSL证书（生产环境必需）

#### 2.3 外部服务
- [ ] ModelScope API Key（AI服务）
- [ ] 域名配置（可选）
- [ ] SMTP服务（可选，用于通知）

---

## 📝 部署步骤

### 三、快速部署流程

#### 3.1 后端部署

```bash
# 1. 克隆项目
git clone <repository_url> /opt/talentlens
cd /opt/talentlens/backend

# 2. 安装依赖
python3 -m venv venv
source venv/bin/activate
pip install poetry
poetry install

# 3. 配置环境变量
cp .env.example .env
nano .env  # 编辑配置

# 4. 初始化数据库
alembic upgrade head

# 5. 创建管理员账户
python scripts/create_admin.py

# 6. 启动服务
uvicorn app.main:app --host 0.0.0.0 --port 9000
```

#### 3.2 前端部署

```bash
# 1. 进入前端目录
cd /opt/talentlens/frontend

# 2. 安装依赖
npm install

# 3. 配置API地址
nano .env.production  # 编辑生产环境配置

# 4. 构建生产版本
npm run build

# 5. 配置Nginx
sudo cp dist/ /var/www/talentlens/
```

#### 3.3 Nginx配置

```nginx
server {
    listen 80;
    server_name yourdomain.com;

    # 前端静态文件
    location / {
        root /var/www/talentlens;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # 后端API
    location /api {
        proxy_pass http://127.0.0.1:9000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # 文件上传限制
    client_max_body_size 50M;
}
```

---

## ✅ 部署验证

### 四、功能验证清单

#### 4.1 基础功能
- [ ] 系统可访问（前端+后端）
- [ ] 登录功能正常（admin/admin123）
- [ ] 修改默认密码成功

#### 4.2 测评功能
- [ ] 创建测评分发
- [ ] 生成二维码/链接
- [ ] 候选人完成测评
- [ ] 查看测评结果

#### 4.3 画像功能
- [ ] 查看候选人列表
- [ ] 生成候选人画像（AI分析）
- [ ] 切换分析级别（深度/专家）
- [ ] 上传简历
- [ ] 重新生成画像

#### 4.4 AI功能验证（重要！）
- [ ] EPQ测评 → AI生成性格分析
- [ ] 多测评 → 交叉验证结果显示
- [ ] AI超时 → 降级算法自动启用
- [ ] 简历上传 → 简历质量评分
- [ ] 岗位推荐 → 场景化推荐结果

#### 4.5 岗位配置
- [ ] 创建岗位画像
- [ ] AI一键配置维度
- [ ] 导入JD
- [ ] 查看人岗匹配

---

## 🔐 安全配置

### 五、安全检查清单

#### 5.1 必做项（生产环境）
- [ ] 修改默认管理员密码
- [ ] 配置HTTPS（SSL证书）
- [ ] 限制数据库外网访问
- [ ] 配置防火墙规则
- [ ] 设置文件上传大小限制

#### 5.2 推荐项
- [ ] 配置Nginx访问日志
- [ ] 设置系统日志轮转
- [ ] 配置定时数据库备份
- [ ] 设置API限流
- [ ] 配置异常监控告警

---

## 📊 监控与维护

### 六、日常维护事项

#### 6.1 每日检查
```bash
# 检查服务状态
systemctl status talentlens-backend
systemctl status nginx

# 查看错误日志
tail -f /var/log/talentlens/error.log

# 检查磁盘空间
df -h
```

#### 6.2 每周维护
```bash
# 数据库备份
pg_dump talentlens_db > backup_$(date +%Y%m%d).sql

# 清理旧日志
find /var/log/talentlens/ -name "*.log" -mtime +30 -delete

# 检查AI API余额
# 访问 ModelScope控制台查看
```

#### 6.3 每月维护
- [ ] 检查系统更新
- [ ] 审查安全日志
- [ ] 性能分析
- [ ] 用户反馈收集

---

## 🛠️ 常见问题排查

### 七、Troubleshooting

#### 7.1 后端服务无法启动
```bash
# 检查端口占用
lsof -i :9000

# 检查Python环境
which python
python --version

# 查看详细错误
uvicorn app.main:app --reload
```

#### 7.2 前端无法访问后端
```bash
# 检查Nginx配置
nginx -t
systemctl restart nginx

# 检查防火墙
sudo ufw status
sudo ufw allow 80
sudo ufw allow 443
```

#### 7.3 AI分析失败
```bash
# 检查API Key配置
cat .env | grep MODELSCOPE_API_KEY

# 测试网络连接
curl -I https://api.modelscope.cn

# 查看后端日志
tail -f /var/log/talentlens/backend.log
```

#### 7.4 数据库连接失败
```bash
# 检查PostgreSQL状态
systemctl status postgresql

# 测试连接
psql -U talentlens -d talentlens_db -h localhost

# 检查.env配置
cat .env | grep DATABASE_URL
```

---

## 📞 交接内容

### 八、运维交接清单

#### 8.1 账号信息
- [ ] 服务器SSH账号密码
- [ ] 数据库账号密码
- [ ] ModelScope API Key
- [ ] 系统管理员账号
- [ ] GitHub仓库访问权限

#### 8.2 配置文件位置
```
关键文件路径:
- 后端代码: /opt/talentlens/backend
- 前端代码: /var/www/talentlens
- 数据库备份: /var/backups/talentlens
- 日志文件: /var/log/talentlens
- Nginx配置: /etc/nginx/sites-available/talentlens
- 环境变量: /opt/talentlens/backend/.env
```

#### 8.3 服务管理命令
```bash
# 启动服务
systemctl start talentlens-backend
systemctl start nginx

# 停止服务
systemctl stop talentlens-backend

# 重启服务
systemctl restart talentlens-backend
systemctl restart nginx

# 查看日志
journalctl -u talentlens-backend -f
```

---

## 📚 培训计划

### 九、运维人员培训

#### 9.1 基础培训（1小时）
- [ ] 系统架构讲解
- [ ] 服务启动/停止
- [ ] 日志查看和分析
- [ ] 数据库备份/恢复

#### 9.2 进阶培训（2小时）
- [ ] AI模型配置和调优
- [ ] 性能监控和优化
- [ ] 故障排查流程
- [ ] 代码更新和部署

#### 9.3 用户培训（1小时）
- [ ] HR使用指南讲解
- [ ] 测评分发操作
- [ ] 画像解读技巧
- [ ] 常见问题解答

---

## 🎯 验收标准

### 十、项目验收

#### 10.1 功能验收
- [ ] 所有核心功能正常（测评、画像、配置）
- [ ] AI功能稳定（P1-P2新功能验证）
- [ ] 性能达标（画像生成<30秒）
- [ ] 无严重Bug

#### 10.2 文档验收
- [ ] 所有文档齐全且最新
- [ ] 部署文档可用（按文档可成功部署）
- [ ] API文档准确
- [ ] 使用指南清晰

#### 10.3 安全验收
- [ ] 默认密码已修改
- [ ] HTTPS已配置
- [ ] 数据库访问受限
- [ ] 文件上传安全

#### 10.4 培训验收
- [ ] 运维人员掌握基本操作
- [ ] HR用户会使用系统
- [ ] 问题可独立排查

---

## 📝 交付签字

### 签字确认

| 角色 | 姓名 | 签字 | 日期 |
|------|------|------|------|
| 开发负责人 | | | |
| 运维负责人 | | | |
| 产品负责人 | | | |
| HR负责人 | | | |

---

## 附录

### A. 联系方式

**技术支持**:
- 开发团队: [技术支持联系方式]
- 紧急热线: [紧急联系方式]

**文档更新**:
- 最新文档: 见 `docs/` 目录
- 更新日志: 见 `docs/README.md`

### B. 相关文档

- [部署交付文档](./04_部署交付文档.md) - 详细部署步骤
- [后续维护文档](./05_后续维护文档.md) - 运维手册
- [部署检查说明](./部署检查说明.md) - 验证清单
- [数据库访问指南](./数据库访问指南.md) - 数据库操作
