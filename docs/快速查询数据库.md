# âš¡ å¿«é€ŸæŸ¥è¯¢æ•°æ®åº“

è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ•°æ®åº“è®¿é—®æŒ‡å—ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ã€‚

---

## ğŸš€ æœ€å¿«æ–¹å¼ï¼šä½¿ç”¨ Python è„šæœ¬ï¼ˆæ¨èï¼‰

### 1ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰è¡¨
```bash
cd /Users/Pythoné¡¹ç›®/HRäººäº‹/backend
python3 query_db.py tables
```

### 2ï¸âƒ£ æŸ¥çœ‹æ•°æ®åº“ç»Ÿè®¡
```bash
python3 query_db.py stats
```

### 3ï¸âƒ£ æŸ¥çœ‹è¡¨ç»“æ„
```bash
# æŸ¥çœ‹å€™é€‰äººè¡¨ç»“æ„
python3 query_db.py info candidates

# æŸ¥çœ‹æäº¤è®°å½•è¡¨ç»“æ„
python3 query_db.py info submissions
```

### 4ï¸âƒ£ æŸ¥è¯¢è¡¨æ•°æ®
```bash
# æŸ¥çœ‹å€™é€‰äººæ•°æ®ï¼ˆé»˜è®¤æ˜¾ç¤º10æ¡ï¼‰
python3 query_db.py query candidates

# æŸ¥çœ‹æäº¤è®°å½•ï¼ˆæ˜¾ç¤º5æ¡ï¼‰
python3 query_db.py query submissions 5

# æŸ¥çœ‹æ‰€æœ‰é—®å·ï¼ˆæ˜¾ç¤º20æ¡ï¼‰
python3 query_db.py query questionnaires 20
```

### 5ï¸âƒ£ æ‰§è¡Œè‡ªå®šä¹‰æŸ¥è¯¢
```bash
# æŸ¥è¯¢ç‰¹å®šå€™é€‰äºº
python3 query_db.py sql "SELECT * FROM candidates WHERE name = 'èµµå…­'"

# æŸ¥è¯¢å€™é€‰äººåŠå…¶æäº¤è®°å½•æ•°
python3 query_db.py sql "SELECT c.name, c.phone, COUNT(s.id) as æäº¤æ¬¡æ•° FROM candidates c LEFT JOIN submissions s ON c.id = s.candidate_id GROUP BY c.id"

# æŸ¥è¯¢EPQæµ‹è¯„çš„æäº¤è®°å½•
python3 query_db.py sql "SELECT c.name, s.submitted_at FROM submissions s JOIN candidates c ON s.candidate_id = c.id JOIN questionnaires q ON s.questionnaire_id = q.id WHERE q.type = 'EPQ'"
```

### 6ï¸âƒ£ å¤‡ä»½æ•°æ®åº“
```bash
python3 query_db.py backup
```

### 7ï¸âƒ£ æŸ¥çœ‹å¸®åŠ©
```bash
python3 query_db.py help
```

---

## ğŸ”§ å…¶ä»–æ–¹å¼

### æ–¹å¼1ï¼šSQLite å‘½ä»¤è¡Œ
```bash
cd /Users/Pythoné¡¹ç›®/HRäººäº‹/backend
sqlite3 hr.db

# è¿›å…¥åæ‰§è¡Œï¼š
.tables                          # æŸ¥çœ‹æ‰€æœ‰è¡¨
.schema candidates               # æŸ¥çœ‹è¡¨ç»“æ„
SELECT * FROM candidates;        # æŸ¥è¯¢æ•°æ®
.quit                            # é€€å‡º
```

### æ–¹å¼2ï¼šå›¾å½¢åŒ–å·¥å…·ï¼ˆæœ€å‹å¥½ï¼‰

**æ¨èï¼šDB Browser for SQLite**
```bash
# å®‰è£…
brew install --cask db-browser-for-sqlite

# ä½¿ç”¨
# 1. æ‰“å¼€ DB Browser
# 2. ç‚¹å‡» "Open Database"
# 3. é€‰æ‹©: /Users/Pythoné¡¹ç›®/HRäººäº‹/backend/hr.db
```

---

## ğŸ“Š å¸¸ç”¨è¡¨è¯´æ˜

| è¡¨å | è¯´æ˜ | ä¸»è¦å­—æ®µ |
|------|------|---------|
| `candidates` | å€™é€‰äººä¿¡æ¯ | id, name, phone, gender, position |
| `submissions` | æäº¤è®°å½• | id, candidate_id, questionnaire_id, scores, submitted_at |
| `questionnaires` | é—®å·/æµ‹è¯„ | id, title, type, questions |
| `assessments` | æµ‹è¯„é…ç½® | id, questionnaire_id, name |

---

## ğŸ’¡ å®ç”¨æŸ¥è¯¢ç¤ºä¾‹

### æŸ¥çœ‹æŸä¸ªå€™é€‰äººçš„æ‰€æœ‰æµ‹è¯„
```bash
python3 query_db.py sql "SELECT q.title, q.type, s.submitted_at FROM submissions s JOIN questionnaires q ON s.questionnaire_id = q.id WHERE s.candidate_id = 1"
```

### æŸ¥çœ‹æœ€è¿‘çš„æäº¤è®°å½•
```bash
python3 query_db.py sql "SELECT c.name, q.title, s.submitted_at FROM submissions s JOIN candidates c ON s.candidate_id = c.id JOIN questionnaires q ON s.questionnaire_id = q.id ORDER BY s.submitted_at DESC LIMIT 10"
```

### ç»Ÿè®¡å„ç±»å‹æµ‹è¯„çš„æ•°é‡
```bash
python3 query_db.py sql "SELECT type, COUNT(*) as count FROM questionnaires GROUP BY type"
```

---

## ğŸ›¡ï¸ é‡è¦æé†’

âš ï¸ **ä¿®æ”¹æ•°æ®å‰è¯·å…ˆå¤‡ä»½ï¼**
```bash
python3 query_db.py backup
```

âš ï¸ **è°¨æ…ä½¿ç”¨ DELETE å’Œ UPDATE æ“ä½œ**

---

**è¯¦ç»†æ–‡æ¡£**: è¯·æŸ¥çœ‹ `æ•°æ®åº“è®¿é—®æŒ‡å—.md`

